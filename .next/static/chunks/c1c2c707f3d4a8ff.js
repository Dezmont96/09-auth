(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20896,e=>{e.v({actions:"NoteForm-module__XA_SlW__actions",cancelButton:"NoteForm-module__XA_SlW__cancelButton",error:"NoteForm-module__XA_SlW__error",form:"NoteForm-module__XA_SlW__form",formGroup:"NoteForm-module__XA_SlW__formGroup",input:"NoteForm-module__XA_SlW__input",select:"NoteForm-module__XA_SlW__select",submitButton:"NoteForm-module__XA_SlW__submitButton",textarea:"NoteForm-module__XA_SlW__textarea"})},85762,e=>{"use strict";let t,n;var r=e.i(43476),a=e.i(932),o=e.i(71645),l=e.i(18566),i=e.i(68834);function s(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(r=n.getItem(e))?r:null;return o instanceof Promise?o.then(a):a(o)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}let u=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>u(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>u(t)(e)}}},c={title:"",content:"",tag:"Todo"},d=(0,i.create)()((t=e=>({draft:c,setDraft:t=>e(e=>({draft:{...e.draft,...t}})),clearDraft:()=>e({draft:c})}),n={name:"note-draft-storage",storage:s(()=>localStorage)},(e,r,a)=>{let o,l={storage:s(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...n},i=!1,c=new Set,d=new Set,m=l.storage;if(!m)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...t)},r,a);let g=()=>{let e=l.partialize({...r()});return m.setItem(l.name,{state:e,version:l.version})},f=a.setState;a.setState=(e,t)=>(f(e,t),g());let h=t((...t)=>(e(...t),g()),r,a);a.getInitialState=()=>h;let _=()=>{var t,n;if(!m)return;i=!1,c.forEach(e=>{var t;return e(null!=(t=r())?t:h)});let a=(null==(n=l.onRehydrateStorage)?void 0:n.call(l,null!=(t=r())?t:h))||void 0;return u(m.getItem.bind(m))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var n;let[a,i]=t;if(e(o=l.merge(i,null!=(n=r())?n:h),!0),a)return g()}).then(()=>{null==a||a(o,void 0),o=r(),i=!0,d.forEach(e=>e(o))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{l={...l,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>_(),hasHydrated:()=>i,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},l.skipHydration||_(),o||h}));var m=e.i(54616),g=e.i(12598),f=e.i(19152),h=e.i(20896);function _(e){let t=e.response?.data?.message||e.message;alert(`Could not create note: ${t}`)}e.s(["default",0,()=>{let e,t,n,i,s,u,c,v,p,S,b,x,y,N,j,F,P,C,A,W,I,T,X,B=(0,a.c)(48),w=(0,l.useRouter)(),k=(0,g.useQueryClient)(),{draft:O,setDraft:G,clearDraft:R}=d(),D=(0,o.useRef)(!1);B[0]!==R?(e=()=>()=>{D.current&&R()},t=[R],B[0]=R,B[1]=e,B[2]=t):(e=B[1],t=B[2]),(0,o.useEffect)(e,t),B[3]!==k||B[4]!==w?(n={mutationFn:f.createNote,onSuccess:()=>{D.current=!0,k.invalidateQueries({queryKey:["notes"]}),w.back()},onError:_},B[3]=k,B[4]=w,B[5]=n):n=B[5];let E=(0,m.useMutation)(n);B[6]!==E?(i=e=>{e.preventDefault();let t=new FormData(e.currentTarget),n={title:t.get("title"),content:t.get("content"),tag:t.get("tag")};E.mutate(n)},B[6]=E,B[7]=i):i=B[7];let H=i;B[8]!==w?(s=()=>{w.back()},B[8]=w,B[9]=s):s=B[9];let z=s;B[10]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("label",{htmlFor:"title",children:"Title"}),B[10]=u):u=B[10],B[11]!==G?(c=e=>G({title:e.target.value}),B[11]=G,B[12]=c):c=B[12],B[13]!==O.title||B[14]!==c?(v=(0,r.jsxs)("div",{className:h.default.formGroup,children:[u,(0,r.jsx)("input",{id:"title",type:"text",name:"title",className:h.default.input,defaultValue:O.title,onChange:c,required:!0,minLength:3,maxLength:50})]}),B[13]=O.title,B[14]=c,B[15]=v):v=B[15],B[16]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("label",{htmlFor:"content",children:"Content"}),B[16]=p):p=B[16],B[17]!==G?(S=e=>G({content:e.target.value}),B[17]=G,B[18]=S):S=B[18],B[19]!==O.content||B[20]!==S?(b=(0,r.jsxs)("div",{className:h.default.formGroup,children:[p,(0,r.jsx)("textarea",{id:"content",name:"content",rows:8,className:h.default.textarea,defaultValue:O.content,onChange:S,maxLength:500})]}),B[19]=O.content,B[20]=S,B[21]=b):b=B[21],B[22]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)("label",{htmlFor:"tag",children:"Tag"}),B[22]=x):x=B[22],B[23]!==G?(y=e=>G({tag:e.target.value}),B[23]=G,B[24]=y):y=B[24],B[25]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsx)("option",{value:"Todo",children:"Todo"}),j=(0,r.jsx)("option",{value:"Work",children:"Work"}),F=(0,r.jsx)("option",{value:"Personal",children:"Personal"}),P=(0,r.jsx)("option",{value:"Meeting",children:"Meeting"}),C=(0,r.jsx)("option",{value:"Shopping",children:"Shopping"}),B[25]=N,B[26]=j,B[27]=F,B[28]=P,B[29]=C):(N=B[25],j=B[26],F=B[27],P=B[28],C=B[29]),B[30]!==O.tag||B[31]!==y?(A=(0,r.jsxs)("div",{className:h.default.formGroup,children:[x,(0,r.jsxs)("select",{id:"tag",name:"tag",className:h.default.select,defaultValue:O.tag,onChange:y,children:[N,j,F,P,C]})]}),B[30]=O.tag,B[31]=y,B[32]=A):A=B[32],B[33]!==z||B[34]!==E.isPending?(W=(0,r.jsx)("button",{type:"button",className:h.default.cancelButton,onClick:z,disabled:E.isPending,children:"Cancel"}),B[33]=z,B[34]=E.isPending,B[35]=W):W=B[35];let K=E.isPending?"Creating...":"Create note";return B[36]!==E.isPending||B[37]!==K?(I=(0,r.jsx)("button",{type:"submit",className:h.default.submitButton,disabled:E.isPending,children:K}),B[36]=E.isPending,B[37]=K,B[38]=I):I=B[38],B[39]!==W||B[40]!==I?(T=(0,r.jsxs)("div",{className:h.default.actions,children:[W,I]}),B[39]=W,B[40]=I,B[41]=T):T=B[41],B[42]!==H||B[43]!==b||B[44]!==A||B[45]!==T||B[46]!==v?(X=(0,r.jsxs)("form",{onSubmit:H,className:h.default.form,children:[v,b,A,T]}),B[42]=H,B[43]=b,B[44]=A,B[45]=T,B[46]=v,B[47]=X):X=B[47],X}],85762)}]);