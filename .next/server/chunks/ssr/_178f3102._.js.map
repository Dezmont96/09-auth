{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","turbopack:///[project]/components/ErrorMessage/ErrorMessage.module.css [app-ssr] (css module)","turbopack:///[project]/components/ErrorMessage/ErrorMessage.tsx","turbopack:///[project]/node_modules/next/src/shared/lib/image-external.tsx","turbopack:///[project]/node_modules/next/image.js","turbopack:///[project]/app/(private routes)/profile/edit/EditProfilePage.module.css [app-ssr] (css module)","turbopack:///[project]/app/(private routes)/profile/edit/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","__turbopack_context__.v({\n  \"error\": \"ErrorMessage-module__bzyCla__error\",\n});\n","'use client';\r\n\r\nimport React from 'react';\r\nimport css from './ErrorMessage.module.css';\r\n\r\ninterface ErrorMessageProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({\r\n  children = 'Whoops, something went wrong...',\r\n}) => {\r\n  return <p className={css.error}>{children}</p>;\r\n};\r\n\r\nexport default ErrorMessage;","import type { ImageConfigComplete, ImageLoaderProps } from './image-config'\nimport type { ImageProps, ImageLoader, StaticImageData } from './get-img-props'\n\nimport { getImgProps } from './get-img-props'\nimport { Image } from '../../client/image-component'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\n\n/**\n * For more advanced use cases, you can call `getImageProps()`\n * to get the props that would be passed to the underlying `<img>` element,\n * and instead pass to them to another component, style, canvas, etc.\n *\n * Read more: [Next.js docs: `getImageProps`](https://nextjs.org/docs/app/api-reference/components/image#getimageprops)\n */\nexport function getImageProps(imgProps: ImageProps) {\n  const { props } = getImgProps(imgProps, {\n    defaultLoader,\n    // This is replaced by webpack define plugin\n    imgConf: process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete,\n  })\n  // Normally we don't care about undefined props because we pass to JSX,\n  // but this exported function could be used by the end user for anything\n  // so we delete undefined props to clean it up a little.\n  for (const [key, value] of Object.entries(props)) {\n    if (value === undefined) {\n      delete props[key as keyof typeof props]\n    }\n  }\n  return { props }\n}\n\nexport default Image\n\nexport type { ImageProps, ImageLoaderProps, ImageLoader, StaticImageData }\n","module.exports = require('./dist/shared/lib/image-external')\n","__turbopack_context__.v({\n  \"actions\": \"EditProfilePage-module__XoJWpq__actions\",\n  \"avatar\": \"EditProfilePage-module__XoJWpq__avatar\",\n  \"cancelButton\": \"EditProfilePage-module__XoJWpq__cancelButton\",\n  \"formTitle\": \"EditProfilePage-module__XoJWpq__formTitle\",\n  \"input\": \"EditProfilePage-module__XoJWpq__input\",\n  \"mainContent\": \"EditProfilePage-module__XoJWpq__mainContent\",\n  \"profileCard\": \"EditProfilePage-module__XoJWpq__profileCard\",\n  \"profileInfo\": \"EditProfilePage-module__XoJWpq__profileInfo\",\n  \"saveButton\": \"EditProfilePage-module__XoJWpq__saveButton\",\n  \"usernameWrapper\": \"EditProfilePage-module__XoJWpq__usernameWrapper\",\n});\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { getMe, updateMe } from '@/lib/api/clientApi';\r\nimport { useAuthStore } from '@/lib/store/authStore';\r\nimport Image from 'next/image';\r\nimport css from './EditProfilePage.module.css';\r\nimport Loader from '@/components/Loader/Loader';\r\nimport ErrorMessage from '@/components/ErrorMessage/ErrorMessage';\r\n\r\nexport default function EditProfilePage() {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const [username, setUsername] = useState('');\r\n  const { setUser } = useAuthStore();\r\n\r\n  const { data: user, isLoading, isError } = useQuery({\r\n    queryKey: ['user-profile'],\r\n    queryFn: getMe,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setUsername(user.username);\r\n    }\r\n  }, [user]);\r\n\r\n  const mutation = useMutation({\r\n    mutationFn: (newUsername: string) => updateMe({ username: newUsername }),\r\n    onSuccess: (updatedUser) => {\r\n      setUser(updatedUser);\r\n      \r\n      queryClient.invalidateQueries({ queryKey: ['user-profile'] });\r\n      router.push('/profile');\r\n    },\r\n    onError: (error: any) => {\r\n      alert(error.response?.data?.message || 'Failed to update profile');\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    mutation.mutate(username);\r\n  };\r\n\r\n  if (isLoading) return <Loader />;\r\n  if (isError) return <ErrorMessage>Failed to load user data.</ErrorMessage>;\r\n\r\n  return (\r\n    <main className={css.mainContent}>\r\n      <div className={css.profileCard}>\r\n        <h1 className={css.formTitle}>Edit Profile</h1>\r\n\r\n        {user?.avatar && (\r\n            <Image \r\n              src={user.avatar}\r\n              alt=\"User Avatar\"\r\n              width={120}\r\n              height={120}\r\n              className={css.avatar}\r\n            />\r\n        )}\r\n\r\n        <form className={css.profileInfo} onSubmit={handleSubmit}>\r\n          <div className={css.usernameWrapper}>\r\n            <label htmlFor=\"username\">Username:</label>\r\n            <input \r\n              id=\"username\"\r\n              type=\"text\"\r\n              className={css.input}\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <p>Email: {user?.email}</p>\r\n\r\n          <div className={css.actions}>\r\n            <button type=\"submit\" className={css.saveButton} disabled={mutation.isPending}>\r\n              {mutation.isPending ? 'Saving...' : 'Save'}\r\n            </button>\r\n            <button type=\"button\" className={css.cancelButton} onClick={() => router.push('/profile')}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":["module","exports","require","vendored","ReactDOM","getImageProps","imgProps","props","getImgProps","defaultLoader","imgConf","process","env","__NEXT_IMAGE_OPTS","key","value","Object","entries","undefined","Image"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,QAAQ,YCFjC,EAAA,CAAA,CAAA,CACA,MAAA,oCACA,4CCCA,EAAA,EAAA,CAAA,CAAA,wBAMkD,CAAC,UACjD,EAAW,iCAAiC,CAC7C,GACQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,EAAA,OAAG,CAAC,KAAK,UAAG,4FCqBnC,OAAoB,CAAA,kBAApB,GAjBgBC,aAAa,CAAA,kBAAbA,4FAbY,CAAA,CAAA,IAAA,OACN,CAAA,CAAA,IAAA,WAGI,CAAA,CAAA,IAAA,GASnB,SAASA,EAAcC,CAAoB,EAChD,GAAM,OAAEC,CAAK,CAAE,CAAGC,CAAAA,EAAAA,EAAAA,WAAAA,AAAW,EAACF,EAAU,CACtCG,cAAAA,EAAAA,OAAa,CAEbC,OAAAA,CAAsC,CAA7BC,QAAQC,GAAG,CAACC,iBAAiB,qJACxC,GAIA,IAAK,GAAM,CAACC,EAAKC,EAAM,GAAIC,OAAOC,OAAO,CAACV,OAAQ,CAClCW,IAAVH,GACF,IADuB,GAChBR,CAAK,CAACO,EAA0B,CAG3C,MAAO,OAAEP,CAAM,CACjB,KAEA,EAAeY,EAAAA,KAAK,kBCjCpB,EAAO,OAAO,CAAA,EAAA,CAAA,CAAA,kBCAd,EAAA,CAAA,CAAA,CACA,QAAA,0CACA,OAAA,yCACA,aAAA,+CACA,UAAA,4CACA,MAAA,wCACA,YAAA,8CACA,YAAA,8CACA,YAAA,8CACA,WAAA,6CACA,gBAAA,iDACA,4CCTA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAC5B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAE,SAAO,CAAE,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,IAE1B,CAAE,KAAM,CAAI,WAAE,CAAS,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAClD,SAAU,CAAC,eAAe,CAC1B,QAAS,EAAA,KAAK,AAChB,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,EAAY,CADJ,CACS,QAAQ,CAE7B,EAAG,CAAC,EAAK,EAET,IAAM,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC3B,WAAY,AAAC,GAAwB,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAE,SAAU,CAAY,GACtE,UAAW,AAAC,IACV,EAAQ,GAER,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,eAAe,AAAC,GAC3D,EAAO,IAAI,CAAC,WACd,EACA,QAAS,AAAC,IACR,MAAM,EAAM,QAAQ,EAAE,MAAM,SAAW,2BACzC,CACF,UAOA,AAAI,EAAkB,CAAA,EAAA,EAAA,GAAA,CAAP,CAAQ,EAAA,OAAM,CAAA,CAAA,GACzB,EAAgB,CAAA,EAAA,EAAA,EAAP,CAAO,EAAC,EAAA,OAAY,CAAA,UAAC,8BAGhC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAG,CAAC,WAAW,UAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAG,CAAC,WAAW,WAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,EAAA,OAAG,CAAC,SAAS,UAAE,iBAE7B,GAAM,QACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,IAAK,EAAK,MAAM,CAChB,IAAI,cACJ,MAAO,IACP,OAAQ,IACR,UAAW,EAAA,OAAG,CAAC,MAAM,GAI3B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAG,CAAC,WAAW,CAAE,SAvBnB,AAAC,CAuB4B,GAtBhD,EAAM,cAAc,GACpB,EAAS,MAAM,CAAC,EAClB,YAqBQ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAG,CAAC,eAAe,WACjC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,oBAAW,cAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,WACH,KAAK,OACL,UAAW,EAAA,OAAG,CAAC,KAAK,CACpB,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,OAI/C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,UAAQ,GAAM,SAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAG,CAAC,OAAO,WACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAW,EAAA,OAAG,CAAC,UAAU,CAAE,SAAU,EAAS,SAAS,UAC1E,EAAS,SAAS,CAAG,YAAc,SAEtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAW,EAAA,OAAG,CAAC,YAAY,CAAE,QAAS,IAAM,EAAO,IAAI,CAAC,qBAAa,qBAQvG","ignoreList":[0,3,4]}