module.exports=[74870,a=>{a.v({actions:"NoteForm-module__XA_SlW__actions",cancelButton:"NoteForm-module__XA_SlW__cancelButton",error:"NoteForm-module__XA_SlW__error",form:"NoteForm-module__XA_SlW__form",formGroup:"NoteForm-module__XA_SlW__formGroup",input:"NoteForm-module__XA_SlW__input",select:"NoteForm-module__XA_SlW__select",submitButton:"NoteForm-module__XA_SlW__submitButton",textarea:"NoteForm-module__XA_SlW__textarea"})},36429,a=>{"use strict";let b,c;var d=a.i(87924),e=a.i(72131),f=a.i(50944),g=a.i(20226);function h(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let i=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>i(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>i(b)(a)}}},j={title:"",content:"",tag:"Todo"},k=(0,g.create)()((b=a=>({draft:j,setDraft:b=>a(a=>({draft:{...a.draft,...b}})),clearDraft:()=>a({draft:j})}),c={name:"note-draft-storage",storage:h(()=>localStorage)},(a,d,e)=>{let f,g={storage:h(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...c},j=!1,k=new Set,l=new Set,m=g.storage;if(!m)return b((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},d,e);let n=()=>{let a=g.partialize({...d()});return m.setItem(g.name,{state:a,version:g.version})},o=e.setState;e.setState=(a,b)=>(o(a,b),n());let p=b((...b)=>(a(...b),n()),d,e);e.getInitialState=()=>p;let q=()=>{var b,c;if(!m)return;j=!1,k.forEach(a=>{var b;return a(null!=(b=d())?b:p)});let e=(null==(c=g.onRehydrateStorage)?void 0:c.call(g,null!=(b=d())?b:p))||void 0;return i(m.getItem.bind(m))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(b=>{var c;let[e,h]=b;if(a(f=g.merge(h,null!=(c=d())?c:p),!0),e)return n()}).then(()=>{null==e||e(f,void 0),f=d(),j=!0,l.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(m=a.storage)},clearStorage:()=>{null==m||m.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>q(),hasHydrated:()=>j,onHydrate:a=>(k.add(a),()=>{k.delete(a)}),onFinishHydration:a=>(l.add(a),()=>{l.delete(a)})},g.skipHydration||q(),f||p}));var l=a.i(70025),m=a.i(37927),n=a.i(93505),o=a.i(74870);a.s(["default",0,()=>{let a=(0,f.useRouter)(),b=(0,m.useQueryClient)(),{draft:c,setDraft:g,clearDraft:h}=k(),i=(0,e.useRef)(!1);(0,e.useEffect)(()=>()=>{i.current&&h()},[h]);let j=(0,l.useMutation)({mutationFn:n.createNote,onSuccess:()=>{i.current=!0,b.invalidateQueries({queryKey:["notes"]}),a.back()},onError:a=>{let b=a.response?.data?.message||a.message;alert(`Could not create note: ${b}`)}});return(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget),c={title:b.get("title"),content:b.get("content"),tag:b.get("tag")};j.mutate(c)},className:o.default.form,children:[(0,d.jsxs)("div",{className:o.default.formGroup,children:[(0,d.jsx)("label",{htmlFor:"title",children:"Title"}),(0,d.jsx)("input",{id:"title",type:"text",name:"title",className:o.default.input,defaultValue:c.title,onChange:a=>g({title:a.target.value}),required:!0,minLength:3,maxLength:50})]}),(0,d.jsxs)("div",{className:o.default.formGroup,children:[(0,d.jsx)("label",{htmlFor:"content",children:"Content"}),(0,d.jsx)("textarea",{id:"content",name:"content",rows:8,className:o.default.textarea,defaultValue:c.content,onChange:a=>g({content:a.target.value}),maxLength:500})]}),(0,d.jsxs)("div",{className:o.default.formGroup,children:[(0,d.jsx)("label",{htmlFor:"tag",children:"Tag"}),(0,d.jsxs)("select",{id:"tag",name:"tag",className:o.default.select,defaultValue:c.tag,onChange:a=>g({tag:a.target.value}),children:[(0,d.jsx)("option",{value:"Todo",children:"Todo"}),(0,d.jsx)("option",{value:"Work",children:"Work"}),(0,d.jsx)("option",{value:"Personal",children:"Personal"}),(0,d.jsx)("option",{value:"Meeting",children:"Meeting"}),(0,d.jsx)("option",{value:"Shopping",children:"Shopping"})]})]}),(0,d.jsxs)("div",{className:o.default.actions,children:[(0,d.jsx)("button",{type:"button",className:o.default.cancelButton,onClick:()=>{a.back()},disabled:j.isPending,children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:o.default.submitButton,disabled:j.isPending,children:j.isPending?"Creating...":"Create note"})]})]})}],36429)}];

//# sourceMappingURL=components_NoteForm_dc5c7b5b._.js.map